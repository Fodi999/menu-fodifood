# üõ°Ô∏è Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç middleware?

Middleware –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–¥–æ** —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –≠—Ç–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —á–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞
```typescript
const token = await getToken({ 
  req: request,
  secret: process.env.NEXTAUTH_SECRET 
});
```
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω –∏–∑ cookies
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å —Ç–æ–∫–µ–Ω–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email, role, id)

### 2. –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω–∫–∏ `/admin`
```typescript
if (pathname.startsWith("/admin")) {
  if (!token) {
    // –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin
    return NextResponse.redirect("/auth/signin?callbackUrl=/admin");
  }
  if (token.role !== "admin") {
    // –ù–µ –∞–¥–º–∏–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /profile
    return NextResponse.redirect("/profile");
  }
  // ‚úÖ –ê–¥–º–∏–Ω ‚Üí –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω
}
```

**–õ–æ–≥–∏–∫–∞:**
- ‚ùå **–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞** ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/auth/signin`
- ‚ùå **–†–æ–ª—å –Ω–µ "admin"** ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/profile`
- ‚úÖ **–†–æ–ª—å "admin"** ‚Üí –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω

### 3. –ó–∞—â–∏—Ç–∞ –ø—Ä–æ—Ñ–∏–ª—è `/profile` –∏ `/orders`
```typescript
if (pathname.startsWith("/profile") || pathname.startsWith("/orders")) {
  if (!token) {
    // –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin
    return NextResponse.redirect("/auth/signin?callbackUrl=/profile");
  }
  // ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω
}
```

**–õ–æ–≥–∏–∫–∞:**
- ‚ùå **–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞** ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/auth/signin`
- ‚úÖ **–ï—Å—Ç—å —Ç–æ–∫–µ–Ω** ‚Üí –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω (–ª—é–±–∞—è —Ä–æ–ª—å)

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å `/profile`
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /profile
2. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞
3. Middleware —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /auth/signin?callbackUrl=/profile
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç
5. NextAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ /profile (–∏—Å–ø–æ–ª—å–∑—É—è callbackUrl)
6. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å `/admin`
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (role: "user") –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /admin
2. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –µ—Å—Ç—å —Ç–æ–∫–µ–Ω, role = "user"
3. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å ‚Üí –Ω–µ "admin"
4. Middleware —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ /profile
5. ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å (–Ω–µ –∞–¥–º–∏–Ω–∫—É)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/admin`
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (role: "admin") –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /admin
2. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –µ—Å—Ç—å —Ç–æ–∫–µ–Ω, role = "admin"
3. Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å ‚Üí "admin" ‚úÖ
4. Middleware —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø
5. ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –∞–¥–º–∏–Ω–∫—É
```

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

Middleware –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```
‚úÖ –£—Å–ø–µ—à–Ω—ã–π –¥–æ—Å—Ç—É–ø:
üõ°Ô∏è Middleware: /profile | Authenticated: true | Role: user
‚úÖ Authenticated access: user@test.com

‚úÖ –ê–¥–º–∏–Ω –¥–æ—Å—Ç—É–ø:
üõ°Ô∏è Middleware: /admin | Authenticated: true | Role: admin
‚úÖ Admin access granted: admin@fodisushi.com

‚ùå –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø:
üõ°Ô∏è Middleware: /profile | Authenticated: false | Role: none
‚ùå Unauthorized access to protected page, redirecting to signin

‚ùå –ù–µ-–∞–¥–º–∏–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É:
üõ°Ô∏è Middleware: /admin | Authenticated: true | Role: user
‚ùå Non-admin user attempted to access admin area: user@test.com
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Matcher (–∫–∞–∫–∏–µ –ø—É—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å)
```typescript
export const config = {
  matcher: [
    "/admin/:path*",   // /admin, /admin/users, /admin/orders –∏ —Ç.–¥.
    "/profile/:path*", // /profile, /profile/settings –∏ —Ç.–¥.
    "/orders/:path*",  // /orders, /orders/123 –∏ —Ç.–¥.
  ],
};
```

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
- `/admin/:path*` - –ø—Ä–æ–≤–µ—Ä—è—Ç—å `/admin` –∏ –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—É—Ç–∏
- `/profile` - –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ `/profile` (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –ø—É—Ç–µ–π

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä `/cart`:

```typescript
// src/middleware.ts
if (pathname.startsWith("/cart")) {
  if (!token) {
    const signInUrl = new URL("/auth/signin", request.url);
    signInUrl.searchParams.set("callbackUrl", pathname);
    return NextResponse.redirect(signInUrl);
  }
}

// –ò –¥–æ–±–∞–≤–∏—Ç—å –≤ matcher:
export const config = {
  matcher: [
    "/admin/:path*",
    "/profile/:path*",
    "/orders/:path*",
    "/cart/:path*", // ‚Üê –Ω–æ–≤—ã–π –ø—É—Ç—å
  ],
};
```

## üÜö Middleware vs –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### Middleware (Edge Runtime)
```typescript
// src/middleware.ts
export async function middleware(request: NextRequest) {
  const token = await getToken({ req: request });
  if (!token) {
    return NextResponse.redirect("/auth/signin");
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ (Edge Runtime)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ **–¥–æ** —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ API (—Ç–æ–ª—å–∫–æ JWT)
- ‚ùå –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (Server Component)
```typescript
// app/profile/page.tsx
export default async function ProfilePage() {
  const session = await auth();
  if (!session?.user) {
    redirect("/auth/signin");
  }
  // ...
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ë–î (Prisma)
- ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –ì–∏–±–∫–∞—è –ª–æ–≥–∏–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–Ω—É–∂–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É)
- ‚ùå –¢—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–∞!

```typescript
// 1. Middleware - –±–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ (–±—ã—Å—Ç—Ä–æ)
// src/middleware.ts
export async function middleware(request: NextRequest) {
  const token = await getToken({ req: request });
  if (!token) {
    return NextResponse.redirect("/auth/signin");
  }
}

// 2. –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
// app/admin/page.tsx
export default async function AdminPage() {
  const session = await auth();
  
  if (!session?.user) {
    redirect("/auth/signin");
  }
  
  if (session.user.role !== "admin") {
    redirect("/profile");
  }
  
  // –¢–µ–ø–µ—Ä—å —Ç–æ—á–Ω–æ –∞–¥–º–∏–Ω!
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ middleware

### –¢–µ—Å—Ç 1: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ /profile
```bash
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000/profile
3. ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ /auth/signin?callbackUrl=/profile
```

### –¢–µ—Å—Ç 2: –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å /admin
```bash
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ user@test.com / user123
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ /admin
3. ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ /profile
4. ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: "Non-admin user attempted to access admin area"
```

### –¢–µ—Å—Ç 3: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /admin
```bash
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin@fodisushi.com / admin123
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ /admin
3. ‚úÖ –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
4. ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: "Admin access granted: admin@fodisushi.com"
```

### –¢–µ—Å—Ç 4: –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /profile
```bash
1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ /profile
3. ‚úÖ –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
4. ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: "Authenticated access: –≤–∞—à@email.com"
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Middleware –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—Å–µ–≥–¥–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ NEXTAUTH_SECRET –≤ .env.local
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ DevTools:
   F12 ‚Üí Application ‚Üí Cookies ‚Üí http://localhost:3000
   –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: next-auth.session-token
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ middleware –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –º–µ–∂–¥—É /auth/signin –∏ /profile"

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ /auth/signin –ù–ï –≤ matcher!
export const config = {
  matcher: [
    "/admin/:path*",
    "/profile/:path*",
    // ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ: "/auth/:path*"
  ],
};
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Middleware –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ Vercel"

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ trustHost: true –≤ auth.ts
export const { handlers, signIn, signOut, auth } = NextAuth({
  trustHost: true, // ‚Üê –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Vercel!
  // ...
});
```

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
–ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–±–µ–∑ –∑–∞—â–∏—Ç—ã):
‚îú‚îÄ‚îÄ / (–≥–ª–∞–≤–Ω–∞—è)
‚îú‚îÄ‚îÄ /auth/signin (–≤—Ö–æ–¥)
‚îú‚îÄ‚îÄ /auth/signup (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
‚îî‚îÄ‚îÄ /api/products (API –ø—Ä–æ–¥—É–∫—Ç–æ–≤)

–ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (middleware + —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞):
‚îú‚îÄ‚îÄ /profile (–ª—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ /orders (–ª—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
‚îî‚îÄ‚îÄ /admin (—Ç–æ–ª—å–∫–æ role: "admin")
    ‚îú‚îÄ‚îÄ /admin/users
    ‚îú‚îÄ‚îÄ /admin/orders
    ‚îî‚îÄ‚îÄ /admin/products
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Middleware –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** üõ°Ô∏è –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞ (middleware + —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)

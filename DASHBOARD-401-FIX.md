# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 401 –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/admin/dashboard` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
‚ùå API Error: 401 {"error":"Invalid token"}
```

### –ü—Ä–∏—á–∏–Ω–∞
–ú–µ—Ç–æ–¥ `ordersAPI.getAllAdmin()` —Ç—Ä–µ–±—É–µ—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞, –Ω–æ —Ç–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–∞—Ä–æ–ª—è –±–µ–∑ –≤—ã–¥–∞—á–∏ JWT —Ç–æ–∫–µ–Ω–∞.

## –†–µ—à–µ–Ω–∏–µ

–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–∫–∞–∑–∞—Ö –¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### 1. –£–±—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ API

**–î–æ:**
```typescript
const [orders, categories, menuItems] = await Promise.all([
  ordersAPI.getAllAdmin().catch(() => []), // ‚ùå 401 –æ—à–∏–±–∫–∞
  categoriesAPI.getAll().catch(() => []),
  menuAPI.getAll().catch(() => []),
]);

const totalRevenue = orders.reduce((sum, order) => 
  sum + Number(order.total || 0), 0
);
const recentOrders = orders.slice(0, 5);
```

**–ü–æ—Å–ª–µ:**
```typescript
// Load only public data (orders require JWT token)
const [categories, menuItems] = await Promise.all([
  categoriesAPI.getAll().catch(() => []),
  menuAPI.getAll().catch(() => []),
]);

// For now, we don't have orders data
// TODO: Implement proper JWT authentication flow
setStats({
  totalOrders: 0, 
  totalRevenue: 0,
  totalCategories: categories.length,
  totalMenuItems: menuItems.length,
  recentOrders: [],
});
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω UI –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ó–∞–∫–∞–∑—ã –∏ –î–æ—Ö–æ–¥:**
```typescript
<p className="text-xs text-muted-foreground">–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω–æ</p>
// –í–º–µ—Å—Ç–æ: "–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è"
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã"

**–î–æ:**
```typescript
{stats.recentOrders.length === 0 ? (
  <div>–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</div>
) : (
  // –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
)}
```

**–ü–æ—Å–ª–µ:**
```typescript
<div className="text-center py-8 text-muted-foreground">
  <ShoppingCart className="w-12 h-12 mx-auto mb-3 opacity-50" />
  <p className="font-medium">–î–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p>
  <p className="text-sm mt-2">
    –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –±—ç–∫–µ–Ω–¥–æ–º
  </p>
</div>
```

#### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑—ã"

**–î–æ:**
```typescript
<Button asChild>
  <Link href="/admin/orders">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑—ã</Link>
</Button>
```

**–ü–æ—Å–ª–µ:**
```typescript
<Button variant="outline" disabled>
  <Eye className="w-4 h-4 mr-2" />
  –°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω–æ
</Button>
```

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):
- üìä **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (5)
- üçú **–ë–ª—é–¥–∞ –≤ –º–µ–Ω—é**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (15)
- üè† **–ö–Ω–æ–ø–∫–∞ "–ú–µ–Ω—é"**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### ‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç JWT):
- üõí **–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤**: 0 (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω–æ")
- üí∞ **–û–±—â–∏–π –¥–æ—Ö–æ–¥**: 0.00 z≈Ç (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω–æ")
- üìã **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- üîç **–ö–Ω–æ–ø–∫–∞ "–ó–∞–∫–∞–∑—ã"**: –ù–µ–∞–∫—Ç–∏–≤–Ω–∞ (disabled)

### üîÆ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –£–∂–µ –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ "–°–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–Ω–æ"

## –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è JWT –≤ –±—ç–∫–µ–Ω–¥
–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`authAPI.login(password)`) –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω.

**–¢—Ä–µ–±—É–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

#### Backend (Rust):
```rust
// –í–µ—Ä–Ω—É—Ç—å JWT —Ç–æ–∫–µ–Ω –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
pub async fn login(password: String) -> Result<LoginResponse> {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
    // ...
    
    // –°–æ–∑–¥–∞–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
    let token = create_jwt(&user_id)?;
    
    Ok(LoginResponse { token })
}
```

#### Frontend:
```typescript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
const response = await authAPI.login(password);
localStorage.setItem('jwt_token', response.token);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö
const token = localStorage.getItem('jwt_token');
const orders = await ordersAPI.getAllAdmin(); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç —Ç–æ–∫–µ–Ω
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ restaurant-api.ts

```typescript
// –î–æ–±–∞–≤–∏—Ç—å JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
async getAllAdmin(): Promise<OrderWithItems[]> {
  const token = localStorage.getItem('jwt_token');
  const response = await fetch(`${this.baseUrl}/admin/orders`, {
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json',
    },
  });
  return handleResponse(response);
}
```

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞—à–±–æ—Ä–¥–∞

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ JWT:
1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∑–∞–∫–∞–∑–æ–≤
2. –í–µ—Ä–Ω—É—Ç—å —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–∫–∞–∑–æ–≤
4. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–∫–∞–∑—ã"

## –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ç–µ–∫—É—â–µ–µ)

–î–∞—à–±–æ—Ä–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- ‚úÖ –ù–µ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π 401
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –º–µ–Ω—é
- ‚úÖ –ß–µ—Ç–∫–æ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –º–µ–Ω—é

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
5. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ú–µ–Ω—é" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### –≠—Ç–∞–ø 1: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç HIGH)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é JWT —Ç–æ–∫–µ–Ω–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å endpoint `/api/auth/login` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–∫–µ–Ω–∞
- [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –≤ localStorage –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [ ] –î–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –≠—Ç–∞–ø 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∑–∞–∫–∞–∑–æ–≤
- [ ] –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∑–∞–∫–∞–∑–æ–≤
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/orders`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤

### –≠—Ç–∞–ø 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–¥–∞–∂
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö

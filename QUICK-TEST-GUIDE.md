# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ Vercel

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —á–µ—Ä–µ–∑ curl

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
VERCEL_URL="https://menu-fodifood.vercel.app" ./scripts/test-vercel-login.sh
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Health check —É—Å–ø–µ—à–µ–Ω
- ‚úÖ CSRF token –ø–æ–ª—É—á–µ–Ω
- ‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω
- ‚úÖ –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞ (user: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", role: "admin")

---

## üåê –†—É—á–Ω–æ–π —Ç–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
```
https://menu-fodifood.vercel.app
```

### –®–∞–≥ 2: –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"
–ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é:
```
https://menu-fodifood.vercel.app/auth/signin
```

### –®–∞–≥ 3: –í–≤–µ–¥–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
- Email: `admin@fodisushi.com`
- Password: `admin123`

**–î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- Email: `user@test.com`
- Password: `user123`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:
1. **–†–µ–¥–∏—Ä–µ–∫—Ç:**
   - Admin ‚Üí `/admin` (–∞–¥–º–∏–Ω–∫–∞)
   - User ‚Üí `/profile` (–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç)

2. **–í Header –ø–æ—è–≤–∏—Ç—Å—è:**
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")
   - –î–ª—è admin: –∫–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞"

3. **Cookies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Cookies
   - –ù–∞–π–¥–∏—Ç–µ `authjs.session-token`

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

1. **–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø** ‚Üí –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞—Ç—å—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
2. **–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –≤ `/profile`
3. **–î–ª—è admin: –∫–ª–∏–∫–Ω–∏—Ç–µ "‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞"** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –≤ `/admin`

### –®–∞–≥ 6: –í—ã—Ö–æ–¥

1. **–í /profile –∏–ª–∏ /admin –Ω–∞–∂–º–∏—Ç–µ "–í—ã–π—Ç–∏"**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - –ò–º—è –∏—Å—á–µ–∑–ª–æ –∏–∑ Header
   - –ü–æ—è–≤–∏–ª–∞—Å—å –∫–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏"
   - –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å /admin –∏–ª–∏ /profile ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Å—Å–∏—é —á–µ—Ä–µ–∑ API
```bash
curl https://menu-fodifood.vercel.app/api/auth/session
```

**–ï—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã:**
```json
{
  "user": {
    "name": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
    "email": "admin@fodisushi.com",
    "role": "admin"
  },
  "expires": "..."
}
```

**–ï—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã:**
```json
null
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å debug endpoint
```bash
curl https://menu-fodifood.vercel.app/api/auth/debug
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
- `authenticated: true/false`
- `session` —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**DevTools ‚Üí Application ‚Üí Cookies ‚Üí https://menu-fodifood.vercel.app**

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- `authjs.session-token` (–∏–ª–∏ `__Secure-authjs.session-token` –¥–ª—è HTTPS)
- `authjs.csrf-token`

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ Vercel

```bash
vercel logs --follow
```

–ò–ª–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ: https://vercel.com ‚Üí –ø—Ä–æ–µ–∫—Ç ‚Üí Deployments ‚Üí Latest ‚Üí Logs

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤–æ–π—Ç–∏"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ debug endpoint: `/api/auth/debug`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Vercel

### –ü—Ä–æ–±–ª–µ–º–∞: "–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –∏–º—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è"
**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ DevTools
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Å—Å–∏—é —á–µ—Ä–µ–∑ `/api/auth/session`

### –ü—Ä–æ–±–ª–µ–º–∞: "–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–π—Ç–∏ –Ω–∞ /profile"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã: `/api/auth/session`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot access /admin as user"
**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! `/admin` –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è role="admin"
- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ `admin@fodisushi.com` / `admin123`

---

## üìä –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] –í—Ö–æ–¥ —Å admin@fodisushi.com —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /admin –ø—Ä–æ–∏–∑–æ—à—ë–ª
- [ ] –ò–º—è "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Header
- [ ] –ö–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞" –≤–∏–¥–Ω–∞
- [ ] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ê–¥–º–∏–Ω–∫–∞" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è /admin
- [ ] –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–º—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è /profile
- [ ] –í—ã—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–º—è –∏—Å—á–µ–∑–ª–æ
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/signin –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–π—Ç–∏ –Ω–∞ /admin

**–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ**

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Å—É—à–∏)**
3. **–î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏**
5. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏**

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [VERCEL-LOGIN-TEST-REPORT.md](./VERCEL-LOGIN-TEST-REPORT.md) - –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- [README.md](./README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

# API Integration Complete! üéâ

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π REST API –∫–ª–∏–µ–Ω—Ç
- **–§–∞–π–ª**: `src/lib/restaurant-api.ts`
- **Endpoints**:
  - `categoriesAPI` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (GET, POST, PUT, DELETE)
  - `menuAPI` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é (GET, POST, PUT, DELETE)
  - `ordersAPI` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ (CREATE, GET, UPDATE STATUS)
  - `restaurantInfoAPI` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ (GET, UPDATE)
  - `uploadAPI` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Cloudinary

### 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω RestaurantContext —Å API
- **–§–∞–π–ª**: `src/contexts/RestaurantContext.tsx`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `loadData()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º–µ–Ω—é –∏ –∏–Ω—Ñ–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ —Å –±—ç–∫–µ–Ω–¥–∞
  - `saveData()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –±—ç–∫–µ–Ω–¥ (CREATE/UPDATE)
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  - Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ

### 3. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ API
- **–§–∞–π–ª**: `src/app/checkout/page.tsx`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞ –∏ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ `/api/restaurant/orders`
  - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É—Å–ø–µ—Ö–∞ —Å –Ω–æ–º–µ—Ä–æ–º –∑–∞–∫–∞–∑–∞

### 4. –°–æ–∑–¥–∞–Ω seed —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–§–∞–π–ª**: `backend/migrations/seed_data.sql`
- **–°–æ–¥–µ—Ä–∂–∏—Ç**:
  - 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π (Sushi, Ramen, Appetizers, Desserts, Drinks)
  - 15 –±–ª—é–¥ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ
  - –°–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ psql (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ Shuttle)
psql postgresql://[CONNECTION_STRING] < backend/migrations/seed_data.sql

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–µ–Ω–¥ –∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
cd backend
cargo shuttle run
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
psql postgresql://localhost:5432/postgres < migrations/seed_data.sql
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

```bash
npm run dev
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

#### üîí **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
1. –ù–∞–∂–∞—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É –∑–∞–º–∫–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å: `admin123`
3. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"

#### üìù **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
1. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (—Å–º. –≤—ã—à–µ)
2. –ù–∞–∂–∞—Ç—å "–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
3. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±–ª—é–¥–∞ –∏–ª–∏ —Ü–µ–Ω—É
4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" (üíæ)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
6. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É - –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è

#### üõí **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞**
1. –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É (–º–∏–Ω–∏–º—É–º –Ω–∞ 30 z≈Ç)
2. –û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É (–∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
3. –ù–∞–∂–∞—Ç—å "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:
   - –ò–º—è: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
   - –¢–µ–ª–µ—Ñ–æ–Ω: +48 123 456 789
   - –ê–¥—Ä–µ—Å: ul. Przyk≈Çadowa 123
5. –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
6. –ù–∞–∂–∞—Ç—å "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
7. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–æ–≥: `‚úÖ Order created successfully`
8. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/order-success?order=ORD-...`

#### üìä **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://portfolio-a4yb.shuttle.app/api/restaurant/admin/orders

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl https://portfolio-a4yb.shuttle.app/api/restaurant/categories

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–Ω—é
curl https://portfolio-a4yb.shuttle.app/api/restaurant/menu
```

## API Endpoints Reference

### Public (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

```
GET  /api/restaurant/categories              - –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET  /api/restaurant/categories/:id          - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ ID
GET  /api/restaurant/categories/slug/:slug   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ slug
GET  /api/restaurant/menu                    - –í—Å–µ –±–ª—é–¥–∞
GET  /api/restaurant/menu/:id                - –ë–ª—é–¥–æ –ø–æ ID
GET  /api/restaurant/menu/category/:cat_id   - –ë–ª—é–¥–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
POST /api/restaurant/orders                  - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
GET  /api/restaurant/orders/:order_number    - –ó–∞–∫–∞–∑ –ø–æ –Ω–æ–º–µ—Ä—É
GET  /api/restaurant/info                    - –ò–Ω—Ñ–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
```

### Admin (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω)

```
GET    /api/restaurant/admin/categories      - –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (admin)
POST   /api/restaurant/admin/categories      - –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
PUT    /api/restaurant/admin/categories/:id  - –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
DELETE /api/restaurant/admin/categories/:id  - –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

GET    /api/restaurant/admin/menu            - –í—Å–µ –±–ª—é–¥–∞ (admin)
POST   /api/restaurant/admin/menu            - –°–æ–∑–¥–∞—Ç—å –±–ª—é–¥–æ
PUT    /api/restaurant/admin/menu/:id        - –û–±–Ω–æ–≤–∏—Ç—å –±–ª—é–¥–æ
DELETE /api/restaurant/admin/menu/:id        - –£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ

GET    /api/restaurant/admin/orders          - –í—Å–µ –∑–∞–∫–∞–∑—ã
GET    /api/restaurant/admin/orders/:id      - –ó–∞–∫–∞–∑ –ø–æ ID
PUT    /api/restaurant/admin/orders/:id/status - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
PUT    /api/restaurant/admin/orders/:id/cancel - –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑

PUT    /api/restaurant/admin/info            - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–∫–∞–∑ (Order)
```typescript
{
  customer_name: "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  customer_phone: "+48 123 456 789",
  customer_email: "ivan@example.com",
  delivery_street: "ul. Przyk≈Çadowa",
  delivery_building: "123",
  delivery_apartment: "45",
  delivery_city: "Warszawa",
  delivery_postal_code: "00-001",
  delivery_country: "Poland",
  payment_method: "cash", // cash | card | online | blik
  special_instructions: "–ü–æ–∑–≤–æ–Ω–∏—Ç–µ –∑–∞ 10 –º–∏–Ω—É—Ç",
  items: [
    {
      menu_item_id: 1,
      quantity: 2,
      special_instructions: "–ë–µ–∑ –æ—Å—Ç—Ä–æ–≥–æ —Å–æ—É—Å–∞"
    }
  ]
}
```

### –û—Ç–≤–µ—Ç —Å –∑–∞–∫–∞–∑–æ–º
```typescript
{
  order: {
    id: 1,
    order_number: "ORD-1733405678-5234",
    status: "pending",
    total: "95.00",
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  },
  items: [
    {
      id: 1,
      menu_item_name: "California Roll",
      menu_item_price: "45.00",
      quantity: 2
    }
  ]
}
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### ‚úÖ –ì–æ—Ç–æ–≤–æ
- [x] API –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö endpoints
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RestaurantContext
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –±—ç–∫–µ–Ω–¥–∞
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –±—ç–∫–µ–Ω–¥
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ API
- [x] Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### üöß –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è "–ì–æ—Ä–æ–¥" –∏ "–ò–Ω–¥–µ–∫—Å" –≤ —Ñ–æ—Ä–º—É checkout
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞
- [ ] Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ uploadAPI
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
- [ ] Pagination –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- [ ] –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ –ø–æ –º–µ–Ω—é

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞
**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–ø—É—Å—Ç–∏—Ç—å seed_data.sql —Å–∫—Ä–∏–ø—Ç (—Å–º. –®–∞–≥ 1)

### –û—à–∏–±–∫–∞ "Invalid token"
**–†–µ—à–µ–Ω–∏–µ**: –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### CORS –æ—à–∏–±–∫–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ backend/src/main.rs

### –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—ç–∫–µ–Ω–¥ –ª–æ–≥–∏
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–µ—Å—Ç—å JWT —Ç–æ–∫–µ–Ω)

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- üçΩÔ∏è –ú–µ–Ω—é
- üì¶ –ó–∞–∫–∞–∑—ã
- ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ
- üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

–ü—Ä–∏–º–µ—Ä:
```
üçΩÔ∏è Fetching all menu items
‚úÖ Loaded menu items: 15
üíæ Saving restaurant data...
‚úÖ Data saved successfully
üì¶ Sending order to backend: {...}
‚úÖ Order created successfully: ORD-1733405678-5234
```

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üöÄ –í—Å–µ API endpoints –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

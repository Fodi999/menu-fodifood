# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤—Ö–æ–¥–∞ –≤ Chrome

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

Google Chrome –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∏–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Å—Å–∏—é.

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cookies –≤ Chrome**

#### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ DevTools
- –ù–∞–∂–º–∏—Ç–µ `F12` –∏–ª–∏ `Cmd+Option+I` (Mac)
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Application** (–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Cookies
- –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏: **Storage** ‚Üí **Cookies** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
- –ù–∞–π–¥–∏—Ç–µ cookie `next-auth.session-token`

#### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
Name:     next-auth.session-token
Value:    (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ JWT)
Domain:   localhost (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)
Path:     /
Secure:   ‚úì (–¥–ª—è HTTPS) –∏–ª–∏ ‚úó (–¥–ª—è localhost)
HttpOnly: ‚úì
SameSite: Lax
```

### 2Ô∏è‚É£ **–û—á–∏—Å—Ç–∏—Ç–µ cookies –∏ –∫—ç—à**

#### Chrome ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:
1. **–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞**
2. –í—ã–±–µ—Ä–∏—Ç–µ:
   - ‚úÖ –§–∞–π–ª—ã cookie –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–æ–≤
   - ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã
3. –ü–µ—Ä–∏–æ–¥: **–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è**
4. –ù–∞–∂–º–∏—Ç–µ **–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ**

#### –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome DevTools:
- `F12` ‚Üí **Application** ‚Üí **Clear storage**
- –ù–∞–∂–º–∏—Ç–µ **Clear site data**

### 3Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö cookies**

Chrome –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å cookies, –µ—Å–ª–∏ –æ–Ω–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è "—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏".

#### –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. Chrome ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
2. **–§–∞–π–ª—ã cookie –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–æ–≤**
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–ù–ï** –≤–∫–ª—é—á–µ–Ω–æ:
   - ‚ùå "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ñ–∞–π–ª—ã cookie"

#### –ò–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞:
1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞**
3. **–§–∞–π–ª—ã cookie** ‚Üí **–†–∞–∑—Ä–µ—à–∏—Ç—å**

### 4Ô∏è‚É£ **–û—Ç–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Chrome –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å cookies –∏–ª–∏ JavaScript.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **–Ω–æ–≤–æ–µ –æ–∫–Ω–æ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ** (`Cmd+Shift+N` –∏–ª–∏ `Ctrl+Shift+N`)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏

**–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö!

#### –û—Ç–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- `chrome://extensions/`
- –û—Ç–∫–ª—é—á–∏—Ç–µ –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞
- –í–∫–ª—é—á–∞–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –≤–∏–Ω–æ–≤–Ω–∏–∫–∞

**–ß–∞—Å—Ç—ã–µ –≤–∏–Ω–æ–≤–Ω–∏–∫–∏:**
- üö´ AdBlock / uBlock Origin
- üö´ Privacy Badger
- üö´ Ghostery
- üö´ Cookie AutoDelete

### 5Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –∏ SameSite**

–ï—Å–ª–∏ —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ –∏–ª–∏ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö:

#### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (localhost):
–í `src/auth.ts` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
```typescript
cookies: {
  sessionToken: {
    name: `next-auth.session-token`,
    options: {
      httpOnly: true,
      sameSite: 'lax', // ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç cookies –Ω–∞ —Ç–æ–º –∂–µ —Å–∞–π—Ç–µ
      path: '/',
      secure: process.env.NODE_ENV === 'production',
    },
  },
},
trustHost: true, // ‚úÖ –í–∞–∂–Ω–æ –¥–ª—è Vercel
```

#### –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (Vercel):
- `secure: true` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è HTTPS
- `sameSite: 'lax'` ‚Äî —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ —Å–∞–π—Ç—É

### 6Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

#### –õ–æ–∫–∞–ª—å–Ω–æ (.env.local):
```env
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key
```

#### –ù–∞ Vercel:
```env
NEXTAUTH_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.vercel.app
NEXTAUTH_SECRET=your-secret-key
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**
- `NEXTAUTH_URL` –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–∫—É—â–∏–º –¥–æ–º–µ–Ω–æ–º!
- –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —á–µ—Ä–µ–∑ `192.168.x.x` –≤–º–µ—Å—Ç–æ `localhost` ‚Äî –∏–∑–º–µ–Ω–∏—Ç–µ

### 7Ô∏è‚É£ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏**

#### Chrome DevTools ‚Üí Console:
–ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞:
- ‚ùå `401 Unauthorized`
- ‚ùå `CORS error`
- ‚ùå `Cookie blocked`
- ‚ùå `Failed to fetch`

#### Chrome DevTools ‚Üí Network:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Network**
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/auth/callback/credentials`
4. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å **200 OK**

### 8Ô∏è‚É£ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∞**

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤:
- ‚úÖ Firefox
- ‚úÖ Safari
- ‚úÖ Edge
- ‚úÖ Brave

**–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è Chrome!

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
curl -X POST http://localhost:3000/api/auth/callback/credentials \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@fodisushi.com","password":"admin123"}'
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:** —Å—Ç–∞—Ç—É—Å 200 –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ cookies –≤ Chrome
1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/auth/signin`
2. –í–æ–π–¥–∏—Ç–µ (admin@fodisushi.com / admin123)
3. `F12` ‚Üí **Application** ‚Üí **Cookies**
4. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è `next-auth.session-token`

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
```bash
# –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
curl http://localhost:3000/api/auth/session \
  -H "Cookie: next-auth.session-token=–í–ê–®_–¢–û–ö–ï–ù"
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:** –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üõ†Ô∏è –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ò–∑–º–µ–Ω–∏—Ç–µ SameSite –Ω–∞ None

–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ `lax` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–ª—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤):

```typescript
// src/auth.ts
cookies: {
  sessionToken: {
    options: {
      sameSite: 'none', // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 'none'
      secure: true,     // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–∏ 'none'
    },
  },
},
```

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç HTTPS!** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://localhost`

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –û—Ç–∫–ª—é—á–∏—Ç–µ httpOnly (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```typescript
// src/auth.ts
cookies: {
  sessionToken: {
    options: {
      httpOnly: false, // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ false
    },
  },
},
```

‚ö†Ô∏è **–°–Ω–∏–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å!** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –î–æ–±–∞–≤—å—Ç–µ debug

```typescript
// src/auth.ts
export const { handlers, signIn, signOut, auth } = NextAuth({
  debug: true, // –î–æ–±–∞–≤–∏—Ç—å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  // ...–æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
});
```

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ NextAuth.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

- [ ] –û—á–∏—Å—Ç–∏–ª cookies –∏ –∫—ç—à Chrome
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ cookies –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- [ ] –û—Ç–∫–ª—é—á–∏–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª NEXTAUTH_URL –≤ .env.local
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª Network ‚Üí /api/auth/callback
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª –≤ –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ `next-auth.session-token` —Å–æ–∑–¥–∞—ë—Ç—Å—è
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª dev —Å–µ—Ä–≤–µ—Ä (`npm run dev`)

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
```bash
npm run dev
# –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Ö–æ–¥–∞
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ issue
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
- –°–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–Ω—Å–æ–ª–∏ (F12 ‚Üí Console)
- –°–∫—Ä–∏–Ω—à–æ—Ç Network (F12 ‚Üí Network)
- –í–µ—Ä—Å–∏—è Chrome
- –û–°

### 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—Ö–æ–¥–∞
–í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä NextAuth:
- Google OAuth
- GitHub OAuth
- Email Magic Links

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [NextAuth.js Cookies](https://next-auth.js.org/configuration/options#cookies)
- [Chrome SameSite Cookie FAQ](https://www.chromium.org/updates/same-site/)
- [Vercel Environment Variables](https://vercel.com/docs/environment-variables)

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 5 –æ–∫—Ç—è–±—Ä—è 2025 –≥.

# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö-–õ–ò–°–¢ –î–ï–ü–õ–û–Ø

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ü–†–Ø–ú–û –°–ï–ô–ß–ê–° –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 1.1 –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
touch .env
```

#### 1.2 –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```env
# Database (—Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Neon)
DATABASE_URL="postgresql://neondb_owner:–í–ê–®–ê_–ü–ê–†–û–õ–¨@ep-soft-mud-XXXXX-pooler.eu-central-1.aws.neon.tech/neondb?connect_timeout=15&sslmode=require"

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="–≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç"
```

#### 1.3 –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ NEXTAUTH_SECRET:

```bash
openssl rand -base64 32
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `.env` –≤–º–µ—Å—Ç–æ `–≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç`

‚ö†Ô∏è **–°–û–•–†–ê–ù–ò–¢–ï —ç—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Vercel!

---

### 2. Neon Database (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 2.1 –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [https://neon.tech](https://neon.tech)

- [ ] –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç (–µ—Å–ª–∏ –Ω–µ—Ç)
- [ ] –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- [ ] –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω: **EU (Europe)**

#### 2.2 –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

- [ ] –ù–∞–π–¥–∏—Ç–µ **"Connection Details"**
- [ ] –í—ã–±–µ—Ä–∏—Ç–µ **"Pooled connection"** (–¥–ª—è Prisma)
- [ ] –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞:
  ```
  postgresql://neondb_owner:AbC123...@ep-soft-mud-XXXXX-pooler.eu-central-1.aws.neon.tech/neondb?sslmode=require
  ```
- [ ] –í—Å—Ç–∞–≤—å—Ç–µ –µ—ë –≤ `.env` –∫–∞–∫ `DATABASE_URL`

---

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 3.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ Prisma Client
npx prisma generate

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ Neon –ë–î
npx prisma migrate deploy
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
chmod +x deploy-db.sh
./deploy-db.sh
```

#### 3.2 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
npx prisma db seed
```

---

### 4. Vercel Environment Variables (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 4.1 –ó–∞–π–¥–∏—Ç–µ –≤ Vercel:

- [ ] –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ [https://vercel.com](https://vercel.com)
- [ ] –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Environment Variables**

#### 4.2 –î–æ–±–∞–≤—å—Ç–µ 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è **Production**:

```env
DATABASE_URL=postgresql://neondb_owner:–ø–∞—Ä–æ–ª—å@host-pooler.region.aws.neon.tech/neondb?sslmode=require
NEXTAUTH_URL=https://menu-fodifood.vercel.app
NEXTAUTH_SECRET=—Ç–æ—Ç_–∂–µ_—Å–µ–∫—Ä–µ—Ç_–∏–∑_–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ_env
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**
- `DATABASE_URL` - **—Ç–æ—á–Ω–∞—è** —Å—Ç—Ä–æ–∫–∞ –∏–∑ Neon (—Å `-pooler` –≤ —Ö–æ—Å—Ç–µ)
- `NEXTAUTH_URL` - **–≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π URL** –Ω–∞ Vercel
- `NEXTAUTH_SECRET` - **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ**, –∫–∞–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º `.env`

---

### 5. –ó–∞—â–∏—Ç–∞ map() –≤ –∫–æ–¥–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–í —Ñ–∞–π–ª–µ `src/app/components/MainContentDynamic.tsx` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ products —ç—Ç–æ –º–∞—Å—Å–∏–≤
const filteredProducts = Array.isArray(products) 
  ? (selectedCategory === "All" ? products : products.filter(...))
  : [];
```

‚úÖ **–£–∂–µ —Å–¥–µ–ª–∞–Ω–æ** - –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å

---

### 6. –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 6.1 –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
git add .
git commit -m "Production ready: fix all ESLint errors and optimize middleware"
git push
```

#### 6.2 Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

- [ ] –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è (2-3 –º–∏–Ω—É—Ç—ã)
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

---

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

#### 7.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Health:

```
https://menu-fodifood.vercel.app/api/health
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```json
{
  "ok": true,
  "timestamp": "2025-01-03T..."
}
```

#### 7.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Products:

```
https://menu-fodifood.vercel.app/api/products
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ú–∞—Å—Å–∏–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ –ë–î

#### 7.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```
https://menu-fodifood.vercel.app
```

- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] –ü—Ä–æ–¥—É–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ö–æ—Ä–∑–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

---

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå "Failed to connect to database"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π `DATABASE_URL` –≤ Vercel

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ Neon (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å `-pooler`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ **–≤–µ—Å—å** URL —Å –ø–∞—Ä–æ–ª–µ–º
3. Redeploy –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

---

### ‚ùå "NextAuth: NEXTAUTH_URL missing"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É–∫–∞–∑–∞–Ω `NEXTAUTH_URL` –≤ Vercel

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –≤ Environment Variables:
   ```
   NEXTAUTH_URL=https://menu-fodifood.vercel.app
   ```
2. –ó–∞–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π
3. Redeploy –ø—Ä–æ–µ–∫—Ç–∞

---

### ‚ùå "Invalid session" –∏–ª–∏ "JWT verification failed"

**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞–∑–Ω—ã–µ `NEXTAUTH_SECRET` –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ** —Å–µ–∫—Ä–µ—Ç
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç –≤ Vercel Environment Variables
3. Redeploy –ø—Ä–æ–µ–∫—Ç–∞
4. –û—á–∏—Å—Ç–∏—Ç–µ cookies –±—Ä–∞—É–∑–µ—Ä–∞

---

### ‚ùå "Edge Function size exceeds limit"

**–ü—Ä–∏—á–∏–Ω–∞:** Middleware —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
‚úÖ **–£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ** - middleware –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–æ 45 kB

---

### ‚ùå "Products is not iterable" –∏–ª–∏ ".map is not a function"

**–ü—Ä–∏—á–∏–Ω–∞:** API –≤–µ—Ä–Ω—É–ª –Ω–µ –º–∞—Å—Å–∏–≤

**–†–µ—à–µ–Ω–∏–µ:**
‚úÖ **–£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `Array.isArray(products)`

---

## üìä –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Vercel Analytics
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Neon Monitoring
- [ ] –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- [ ] –í–∫–ª—é—á–∏—Ç–µ 2FA –≤ Vercel
- [ ] –í–∫–ª—é—á–∏—Ç–µ 2FA –≤ Neon
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm audit fix`)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:

- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Edge Caching
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Next.js Image
- [ ] –í–∫–ª—é—á–∏—Ç–µ Compression –≤ Vercel

---

## ‚úÖ –ì–û–¢–û–í–û!

–ï—Å–ª–∏ –≤—Å–µ –ø—É–Ω–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã - –≤–∞—à –ø—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω! üéâ

**–í–∞—à —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:**
```
https://menu-fodifood.vercel.app
```

---

## üìû –ü–æ–º–æ—â—å

**–ü—Ä–æ–±–ª–µ–º—ã?**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: Vercel ‚Üí Deployments ‚Üí View Function Logs
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: Neon ‚Üí Monitoring ‚Üí Logs
3. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ GitHub
4. –°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: [DEPLOYMENT.md](./DEPLOYMENT.md)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 3 –æ–∫—Ç—è–±—Ä—è 2025

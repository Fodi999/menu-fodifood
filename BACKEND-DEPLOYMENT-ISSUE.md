# Backend Deployment Issue & Solution

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ sqlx:
```
error: prepared statement "sqlx_s_1" does not exist
```

## –ü—Ä–∏—á–∏–Ω–∞

- **sqlx** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç compile-time verification –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- Neon PostgreSQL pooler –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç prepared statements –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –õ–æ–∫–∞–ª—å–Ω–æ —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

## –†–µ—à–µ–Ω–∏–µ ‚úÖ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–µ–ø–ª–æ–π –Ω–∞ Shuttle (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
cd backend
shuttle deploy
```

**–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- Shuttle –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç DATABASE_URL
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–µ PostgreSQL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- sqlx macros —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –í–∞—Ä–∏–∞–Ω—Ç 2: Offline Mode (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–∏–ª–¥–∞)

```bash
# 1. –°–æ–∑–¥–∞—Ç—å offline data
DATABASE_URL="postgresql://..." cargo sqlx prepare

# 2. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Å offline mode
cargo build --release
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£–±—Ä–∞—Ç—å compile-time verification

–ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `sqlx::query_as!` –Ω–∞ `sqlx::query_as`:

```rust
// –ë—ã–ª–æ:
sqlx::query_as!(Category, "SELECT * FROM categories")

// –°—Ç–∞–Ω–µ—Ç:
sqlx::query_as::<_, Category>("SELECT * FROM categories")
```

‚ö†Ô∏è **–ú–∏–Ω—É—Å:** —Ç–µ—Ä—è–µ—Ç—Å—è type safety –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

## –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL –Ω–∞ Neon Cloud
‚úÖ **–¢–∞–±–ª–∏—Ü—ã**: –í—Å–µ 6 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
‚úÖ **–ö–æ–¥**: –í—Å–µ handlers –∏ models –≥–æ—Ç–æ–≤—ã
‚úÖ **–õ–æ–≥–∏–∫–∞**: 25+ endpoints –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –í—Å–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- **Frontend**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- **Backend –∫–æ–¥**: ‚úÖ 100% –≥–æ—Ç–æ–≤
- **Backend –∫–æ–º–ø–∏–ª—è—Ü–∏—è**: ‚ö†Ô∏è –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è sqlx verification
- **–†–µ—à–µ–Ω–∏–µ**: –î–µ–ø–ª–æ–π –Ω–∞ Shuttle (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç –ø—Ä–æ–±–ª–µ–º—É)

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

```bash
cd backend
shuttle deploy
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞:
```
https://menu-fodifood.shuttleapp.rs
```

–û–±–Ω–æ–≤–∏—Ç–µ `NEXT_PUBLIC_BACKEND_URL` –≤ `.env.local` —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

---

**–í—ã–≤–æ–¥**: –ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π. –ù–∞ Shuttle –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏! üöÄ
